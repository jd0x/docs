{"consumes":["application/json","application/json; charset=utf-8"],"swagger":"2.0","basePrefix":"/v1","prefix":"/v1","basePath":"/v1","externalDocs":{"url":"https://docs.hasura.io","description":"Documentation for Hasura Auth"},"schemes":["https"],"produces":["application/json; charset=utf-8"],"info":{"version":"0.15","title":"Hasura Auth API","description":"Hausra Auth is an Identity and User management service. This is the API\ndocumentation for Hasura Auth.\nThe APIs are broken down into 3 categories.\n1. The anonymous category means all those requests can be made by a user who is not logged in.\n2. The user category means all those requests can be made by a user who is logged in.\n3. The admin category means all those requests can be made by a user who is logged in and has the admin role.\nThe user and the admin category of requests require the \"Authorization\" header. Refer to documentation for more details.\n"},"definitions":{"EmailData":{"type":"object","properties":{"email":{"type":"string"}}},"UserInfo":{"type":"object","properties":{"email":{"type":"string","description":"Email of the user. This can be null."},"auth_token":{"type":"string","description":"Authorization token of the current logged in user. This token can be used in further requests."},"username":{"type":"string","description":"Username of the user. This can be null."},"hasura_id":{"type":"integer","description":"Hasura ID of the current logged in identity."},"hasura_roles":{"items":{"type":"string"},"type":"array","description":"All the roles attached to the current logged in identity."},"mobile":{"type":"string","description":"Mobile of the user. This can be null."}}},"SuccessMessage":{"type":"object","properties":{"message":{"type":"string","description":"A message indicating the success"}}},"AdminUserInfo":{"type":"object","properties":{"email":{"type":"string"},"roles":{"items":{"type":"string"},"type":"array"},"mobile_verfied":{"type":"boolean"},"active_sessions":{"items":{"$ref":"#/definitions/Session"},"type":"array"},"username":{"type":"string"},"email_verfied":{"type":"boolean"},"id":{"type":"integer"},"is_superuser":{"type":"boolean"},"mobile":{"type":"string"},"date_joined":{"format":"date-time","type":"string"},"last_login":{"format":"date-time","type":"string"},"is_active":{"type":"boolean"}}},"SignupData":{"type":"object","properties":{"data":{"type":"object","description":"Signup data specific to the provider. This field is compulsory."},"provider":{"type":"string","description":"Name of the provider. This field is compulsory."}}},"RoleList":{"type":"object","properties":{"roles":{"items":{"type":"string"},"type":"array","description":"a list of the role names"}}},"SocialLoginUserInfo":{"type":"object","properties":{"auth_token":{"type":"string","description":"Authorization token of the current logged in user. This token can be used in further requests."},"new_user":{"type":"boolean","description":"Boolean value indicating if the user is new or returning."},"access_token":{"type":"string","description":"Access token of the user obtained from the provider."},"hasura_id":{"type":"integer","description":"Hasura ID of the current logged in identity."},"hasura_roles":{"items":{"type":"string"},"type":"array","description":"All the roles attached to the current logged in identity."}}},"ErrorMessage":{"type":"object","properties":{"code":{"type":"string","description":"Short machine readable code of the error."},"message":{"type":"string","description":"Description of the error."}}},"Session":{"type":"object","properties":{"session_id":{"type":"string"},"created":{"format":"date-time","type":"string"}}}},"paths":{"/providers/email/forgot-password":{"post":{"summary":"Request email for resetting password","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"schema":{"type":"object","properties":{"email":{"type":"string","description":"The email of the user"}}},"in":"body","name":"email"}],"tags":["anonymous"]}},"/user/info":{"get":{"summary":"Get credentials of current logged in user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Errors"},"200":{"schema":{"$ref":"#/definitions/UserInfo"},"description":"An object with the hasura ID, roles and auth token of the logged in user."},"401":{"description":"This response is returned when there is no logged in user."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <auth token>"}],"description":"This endpoint returns the user info object of the current logged in user.","tags":["user"]}},"/admin/create-role":{"post":{"summary":"Create a new role","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <session token>"},{"required":true,"schema":{"type":"object","properties":{"role":{"type":"string","description":"The role name"}}},"in":"body","name":"role"}],"description":"Create a new role","tags":["admin"]}},"/admin/roles":{"get":{"summary":"Endpoint to get a list of all the roles available","responses":{"200":{"schema":{"$ref":"#/definitions/RoleList"},"description":"The list of roles"}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <auth token>"}],"description":"Lists all the roles","tags":["admin"]}},"/admin/user/activate":{"post":{"summary":"Activate a user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/UserInfo"},"description":"A success message."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <session token>"},{"required":true,"schema":{"type":"object","properties":{"hasura_id":{"type":"integer","description":"The ID of the user to be activated"}}},"in":"body","name":"hasura_id"}],"description":"Activate an existing user","tags":["admin"]}},"/admin/user/remove-all-sessions":{"post":{"summary":"Force logout a user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <session token>"},{"required":true,"schema":{"type":"object","properties":{"hasura_id":{"type":"integer","description":"The ID of the user"}}},"in":"body","name":"hasura_id"}],"description":"Expiring all sessions of a particular user. Effectively logging him out of all his sessions.","tags":["admin"]}},"/user/logout":{"post":{"summary":"The logout endpoint","responses":{"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A message describing success or failure"}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <auth token>"}],"description":"logout endpoint","tags":["user"]}},"/admin/user/remove-role":{"post":{"summary":"Remove role from user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/UserInfo"},"description":"A success message."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <session token>"},{"required":true,"schema":{"type":"object","properties":{"hasura_id":{"type":"integer","description":"The ID of the user"},"role":{"type":"string","description":"The role name to be unassigned"}}},"in":"body","name":"JSON payload"}],"description":"Remove a particular role from a user","tags":["admin"]}},"/providers/email/reset-password":{"post":{"summary":"Reset password","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"schema":{"type":"object","properties":{"token":{"type":"string","description":"Reset token fetched via forgot password email"},"password":{"type":"string","description":"New password for the user"}}},"in":"body","name":"reset data"}],"tags":["anonymous"]}},"/signup":{"post":{"summary":"Use this endpoint to register/signup a user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Errors"},"200":{"schema":{"$ref":"#/definitions/UserInfo"},"description":"An object with the hasura ID, roles and auth token of the logged in user."}},"parameters":[{"required":true,"schema":{"$ref":"#/definitions/SignupData"},"in":"body","name":"signup data"}],"description":"The mandatory fields are provider and data.","tags":["anonymous"]}},"/admin/user/deactivate":{"post":{"summary":"Deactivate a user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/UserInfo"},"description":"A success message."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <session token>"},{"required":true,"schema":{"type":"object","properties":{"hasura_id":{"type":"integer","description":"The ID of the user to be deactivated"}}},"in":"body","name":"hasura_id"}],"description":"Deactivate an existing user","tags":["admin"]}},"/admin/user/add-role":{"post":{"summary":"Assign role to user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/UserInfo"},"description":"A success message."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <session token>"},{"required":true,"schema":{"type":"object","properties":{"hasura_id":{"type":"integer","description":"The ID of the user"},"role":{"type":"string","description":"The role name to be assigned"}}},"in":"body","name":"JSON payload"}],"description":"Assign a particular role to a user","tags":["admin"]}},"/login":{"post":{"summary":"Use this endpoint to login a user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Errors"},"200":{"schema":{"$ref":"#/definitions/UserInfo"},"description":"An object with the hasura ID, roles and auth token of the logged in user."}},"parameters":[{"required":true,"schema":{"$ref":"#/definitions/SignupData"},"in":"body","name":"login data"}],"description":"The mandatory fields are provider and data.","tags":["anonymous"]}},"/providers/email/verify-email":{"get":{"summary":"Verify user","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"in":"query","name":"token","type":"string","description":"Verification token"}],"tags":["anonymous"]}},"/admin/delete-role":{"post":{"summary":"Delete a role","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <session token>"},{"required":true,"schema":{"type":"object","properties":{"role":{"type":"string","description":"The role name to be deleted"}}},"in":"body","name":"role"}],"description":"Delete an existing role","tags":["admin"]}},"/providers/mobile/send-otp":{"post":{"summary":"Sends the OTP to mobile","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"schema":{"type":"object","properties":{"mobile":{"type":"string","description":"The mobile phone number of the user to send OTP to."}}},"in":"body","name":"mobile"}],"description":"Sends the OTP to mobile. It can be used for both login and signup.","tags":["anonymous"]}},"/admin/users/{hasura_id}":{"get":{"summary":"Fetch user by id","responses":{"200":{"schema":{"$ref":"#/definitions/AdminUserInfo"},"description":"The user's information"}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <auth token>"},{"required":true,"in":"path","name":"hasura_id","type":"integer","description":"hasura_id of the user"}],"description":"Fetch users' information by id","tags":["admin"]}},"/user/change-password":{"post":{"summary":"Change logged in user's password","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"in":"header","name":"Authorization","type":"string","description":"Bearer <session token>"},{"required":true,"schema":{"type":"object","properties":{"new_password":{"type":"string","description":"The new password of the user"},"old_password":{"type":"string","description":"The current/old password of the user"}}},"in":"body","name":"JSON payload"}],"description":"Endpoint to change the password of the logged in user. Make sure the current user is logged in.","tags":["user"]}},"/providers/mobile/resend-otp":{"post":{"summary":"Resend the OTP to mobile","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"schema":{"type":"object","properties":{"mobile":{"type":"string","description":"The mobile phone number of the user to send OTP to."}}},"in":"body","name":"mobile"}],"description":"Resend the OTP to mobile.","tags":["anonymous"]}},"/providers/email/resend-verification":{"post":{"summary":"Resend verification email","responses":{"default":{"schema":{"$ref":"#/definitions/ErrorMessage"},"description":"Unexpected error"},"200":{"schema":{"$ref":"#/definitions/SuccessMessage"},"description":"A success message."}},"parameters":[{"required":true,"schema":{"type":"object","properties":{"email":{"type":"string","description":"The email of the user"}}},"in":"body","name":"email"}],"tags":["anonymous"]}}}}